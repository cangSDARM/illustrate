{"mappings":"A,C,E,A,A,W,iB,C,Q,A,E,Q,S,C,C,C,ECAA,EAAA,OAAA,CAAiB,KAAK,KAAK,CAAC,2+H","sources":["<anon>","src/QUIC/clientInitialKeysCalc.json"],"sourcesContent":["\n      var $parcel$global = globalThis;\n    var parcelRequire = $parcel$global[\"parcelRequire7f38\"];\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"amGmW\", function(module, exports) {\nmodule.exports = JSON.parse('[\"\\u63A5\\u4E0B\\u6765\\uFF0C\\u5BA2\\u6237\\u7AEF\\u7EE7\\u7EED\\u4E3A\\u8FDE\\u63A5\\u505A\\u51C6\\u5907\\uFF1A\\u751F\\u6210\\u521D\\u59CB\\u6570\\u636E\\u5305(packet)\\u7684\\u52A0\\u5BC6\\u5BC6\\u94A5\\u3002\\u7531\\u4E8E\\u5BA2\\u6237\\u7AEF\\u548C\\u670D\\u52A1\\u5668\\u4E4B\\u95F4\\u8FD8\\u6CA1\\u6709\\u8FDB\\u884C\\u4EFB\\u4F55\\u6570\\u636E\\u4F20\\u8F93\\uFF0C\\u56E0\\u6B64\\u8FD9\\u4E9B\\u5BC6\\u94A5\\u7684\\u5B89\\u5168\\u6027\\u6709\\u9650\\u2014\\u2014\\u4EFB\\u4F55\\u89C2\\u5BDF\\u8005\\u90FD\\u53EF\\u4EE5\\u5F97\\u51FA\\u5BC6\\u94A5\\uFF0C\\u5E76\\u50CF\\u670D\\u52A1\\u5668\\u4E00\\u6837\\u8BFB\\u53D6\\u6D41\\u91CF\\u3002\\u52A0\\u5BC6\\u521D\\u59CB\\u6570\\u636E\\u5305\\u53EF\\u4EE5\\u9632\\u6B62\\u67D0\\u4E9B\\u7C7B\\u578B\\u7684\\u653B\\u51FB\\uFF0C\\u5982\\u8BF7\\u6C42\\u4F2A\\u9020\\u653B\\u51FB\\u3002\",\"\\u5BA2\\u6237\\u7AEF\\u751F\\u6210 8bytes \\u7684\\u968F\\u673A\\u6570\\u636E\\uFF0C\\u5728\\u672C\\u6587\\u4E2D\\uFF0C\\u5047\\u8BBE\\u662F\\u5982\\u4E0B\\u5185\\u5BB9\\uFF1A\",{\"Tag\":\"pre\",\"props\":{\"className\":\"ind2\"},\"children\":[{\"Tag\":\"code\",\"props\":{\"className\":\"longboi\"},\"content\":\"0001020304050607\"}]},\"\\u7136\\u540E\\uFF0C\\u5BA2\\u6237\\u7AEF\\u4F7F\\u7528\\u4EE5\\u4E0B\\u8FC7\\u7A0B\\u5F97\\u51FA\\u52A0\\u5BC6\\u5BC6\\u94A5\\uFF1A\",{\"Tag\":\"CodeSample\",\"props\":{\"code\":\"initial_salt = 38762cf7f55934b34d179ae6a4c80cadccbb7f0a\\\\ninitial_random = (random bytes from client given above)\\\\ninitial_secret = HKDF-Extract(salt: initial_salt, key: initial_random)\\\\nclient_secret = HKDF-Expand-Label(key: initial_secret, label: \\\\\"client in\\\\\", ctx: \\\\\"\\\\\", len: 32)\\\\nserver_secret = HKDF-Expand-Label(key: initial_secret, label: \\\\\"server in\\\\\", ctx: \\\\\"\\\\\", len: 32)\\\\nclient_key = HKDF-Expand-Label(key: client_secret, label: \\\\\"quic key\\\\\", ctx: \\\\\"\\\\\", len: 16)\\\\nserver_key = HKDF-Expand-Label(key: server_secret, label: \\\\\"quic key\\\\\", ctx: \\\\\"\\\\\", len: 16)\\\\nclient_iv = HKDF-Expand-Label(key: client_secret, label: \\\\\"quic iv\\\\\", ctx: \\\\\"\\\\\", len: 12)\\\\nserver_iv = HKDF-Expand-Label(key: server_secret, label: \\\\\"quic iv\\\\\", ctx: \\\\\"\\\\\", len: 12)\\\\nclient_hp_key = HKDF-Expand-Label(key: client_secret, label: \\\\\"quic hp\\\\\", ctx: \\\\\"\\\\\", len: 16)\\\\nserver_hp_key = HKDF-Expand-Label(key: server_secret, label: \\\\\"quic hp\\\\\", ctx: \\\\\"\\\\\", len: 16)\"}},{\"children\":[\"\\u4E00\\u4E2A\\u6709\\u8DA3\\u7684\\u70B9\\uFF0C\\u9009\\u62E9\\u5E38\\u6570\",{\"Tag\":\"code\",\"content\":\"38762cf7f55934b34d179ae6a4c80cadccbb7f0a\"},\"\\u4F5C\\u4E3A\\u76D0\\uFF0C\\u5E76\\u4E0D\\u662F\\u5B83\\u53EF\\u4EE5\\u4ECE\\u6570\\u5B66\\u6216\\u5BC6\\u7801\\u5B66\\u539F\\u7406\\u63A8\\u5BFC\\u5F97\\u51FA\\uFF0C\\u800C\\u662F\\u56E0\\u4E3A\\u5B83\\u662F\\u7531\\u8C37\\u6B4C\\u7814\\u7A76\\u4EBA\\u5458\\u53D1\\u73B0\\u7684\\u7B2C\\u4E00\\u4E2A SHA-1 \\u78B0\\u649E\\u7684\\u54C8\\u5E0C\\u503C(QUIC \\u672C\\u8EAB\\u6700\\u521D\\u662F\\u7531\\u8C37\\u6B4C\\u521B\\u5EFA\\u3001\\u8D5E\\u52A9\\u548C\\u90E8\\u7F72\\u7684)\\u3002\"]},\"QUIC \\u8FD8\\u4ECE TLS 1.3 \\u4E2D\\u5F15\\u5165\\u4E86\\u4E24\\u4E2A\\u65B0\\u7684\\u52A0\\u5BC6\\u6982\\u5FF5\\uFF1A\",{\"Tag\":\"ul\",\"children\":[{\"Tag\":\"li\",\"children\":[{\"Tag\":\"a\",\"props\":{\"href\":\"https://hxndg.github.io/2020/08/27/HKDF-Extract%E4%B8%8EHKDF-Expand/\"},\"content\":\"HKDF-Extract\"},\" - \\u7ED9\\u5B9A\\u4E00\\u4E2A\\u76D0\\u503C\\u548C\\u4E00\\u4E9B\\u5B57\\u8282\\u7684\\u5BC6\\u94A5\\u6750\\u6599\\uFF0C\\u6D3E\\u751F\\u51FA\\u4E00\\u4E2A 32bytes(256bits) \\u56FA\\u5B9A\\u957F\\u5EA6\\u7684\\u65B0\\u5BC6\\u94A5\\u6750\\u6599\\uFF0C\\u8F93\\u5165\\u7684\\u5BC6\\u94A5\\u6750\\u6599\\u7684\\u71B5\\u5747\\u5300\\u5730\\u5206\\u5E03\\u5728\\u8F93\\u51FA\\u4E2D\\u3002\"]},{\"Tag\":\"li\",\"children\":[{\"Tag\":\"a\",\"props\":{\"href\":\"https://hxndg.github.io/2020/08/27/HKDF-Extract%E4%B8%8EHKDF-Expand/\"},\"content\":\"HKDF-Expand-Label\"},\" - \\u7ED9\\u51FA\\u4F2A\\u968F\\u673A\\u5BC6\\u94A5\\u3001\\u6807\\u7B7E\\u548C\\u4E0A\\u4E0B\\u6587\\u6570\\u636E\\u7684\\u8F93\\u5165\\uFF0C\\u62D3\\u5C55\\u4E3A\\u4E00\\u4E2A\\u8981\\u6C42\\u957F\\u5EA6\\u7684\\u5BC6\\u94A5\\u3002\"]}]},{\"children\":[\"\\u5728\\u547D\\u4EE4\\u884C\\u4E2D\\u4F7F\\u7528\",{\"Tag\":\"a\",\"props\":{\"href\":\"https://quic.xargs.org/files/hkdf.sh\"},\"content\":\"\\u539F\\u4F5C\\u8005\\u5236\\u4F5C\\u7684 HKDF \\u547D\\u4EE4\\u884C\\u811A\\u672C\"},\"\\uFF0C\\u4F60\\u4E5F\\u53EF\\u4EE5\\u81EA\\u5DF1\\u8BD5\\u8BD5\\uFF1A\"]},{\"Tag\":\"CodeSample\",\"props\":{\"code\":\"$ init_salt=38762cf7f55934b34d179ae6a4c80cadccbb7f0a\\\\n$ init_dcid=0001020304050607\\\\n$ init_secret=$(./hkdf extract $init_salt $init_dcid)\\\\n$ csecret=$(./hkdf expandlabel $init_secret \\\\\"client in\\\\\" \\\\\"\\\\\" 32)\\\\n$ ssecret=$(./hkdf expandlabel $init_secret \\\\\"server in\\\\\" \\\\\"\\\\\" 32)\\\\n$ client_init_key=$(./hkdf expandlabel $csecret \\\\\"quic key\\\\\" \\\\\"\\\\\" 16)\\\\n$ server_init_key=$(./hkdf expandlabel $ssecret \\\\\"quic key\\\\\" \\\\\"\\\\\" 16)\\\\n$ client_init_iv=$(./hkdf expandlabel $csecret \\\\\"quic iv\\\\\" \\\\\"\\\\\" 12)\\\\n$ server_init_iv=$(./hkdf expandlabel $ssecret \\\\\"quic iv\\\\\" \\\\\"\\\\\" 12)\\\\n$ client_init_hp=$(./hkdf expandlabel $csecret \\\\\"quic hp\\\\\" \\\\\"\\\\\" 16)\\\\n$ server_init_hp=$(./hkdf expandlabel $ssecret \\\\\"quic hp\\\\\" \\\\\"\\\\\" 16)\\\\n$ echo ckey: $client_init_key\\\\n$ echo civ: $client_init_iv\\\\n$ echo chp: $client_init_hp\\\\n$ echo skey: $server_init_key\\\\n$ echo siv: $server_init_iv\\\\n$ echo shp: $server_init_hp\\\\n\\\\nckey: b14b918124fda5c8d79847602fa3520b\\\\nciv: ddbc15dea80925a55686a7df\\\\nchp: 6df4e9d737cdf714711d7c617ee82981\\\\nskey: d77fc4056fcfa32bd1302469ee6ebf90\\\\nsiv: fcb748e37ff79860faa07477\\\\nshp: 440b2725e91dc79b370711ef792faa3d\"}},\"\\u7531\\u6B64\\u6211\\u4EEC\\u53EF\\u4EE5\\u5F97\\u5230\\u4EE5\\u4E0B\\u5BC6\\u94A5\\u4EE5\\u53CA\\u521D\\u59CB\\u5411\\u91CF\\uFF1A\",{\"Tag\":\"ul\",\"children\":[{\"Tag\":\"li\",\"children\":[\"\\u5BA2\\u6237\\u7AEF\\u521D\\u59CB\\u5BC6\\u94A5: \",{\"Tag\":\"code\",\"content\":\"b14b918124fda5c8d79847602fa3520b\"}]},{\"Tag\":\"li\",\"children\":[\"\\u5BA2\\u6237\\u7AEF\\u521D\\u59CB\\u5411\\u91CF: \",{\"Tag\":\"code\",\"content\":\"ddbc15dea80925a55686a7df\"}]},{\"Tag\":\"li\",\"children\":[\"\\u670D\\u52A1\\u5668\\u7AEF\\u521D\\u59CB\\u5BC6\\u94A5: \",{\"Tag\":\"code\",\"content\":\"d77fc4056fcfa32bd1302469ee6ebf90\"}]},{\"Tag\":\"li\",\"children\":[\"\\u670D\\u52A1\\u5668\\u7AEF\\u521D\\u59CB\\u5411\\u91CF: \",{\"Tag\":\"code\",\"content\":\"fcb748e37ff79860faa07477\"}]}]},\"\\u6211\\u4EEC\\u8FD8\\u5F97\\u5230\\u4E86\\u4EE5\\u4E0B\\u7684 \\\\\"\\u6570\\u636E\\u5305\\u5934\\u4FDD\\u62A4\\u5BC6\\u94A5\\\\\"(header protection keys)\\uFF0C\\u540E\\u9762\\u5C06\\u89E3\\u91CA\\u5176\\u4F5C\\u7528\\uFF1A\",{\"Tag\":\"ul\",\"children\":[{\"Tag\":\"li\",\"children\":[\"\\u5BA2\\u6237\\u7AEF\\u521D\\u59CB\\u6570\\u636E\\u5305\\u5934\\u4FDD\\u62A4\\u5BC6\\u94A5: \",{\"Tag\":\"code\",\"content\":\"6df4e9d737cdf714711d7c617ee82981\"}]},{\"Tag\":\"li\",\"children\":[\"\\u670D\\u52A1\\u5668\\u7AEF\\u521D\\u59CB\\u6570\\u636E\\u5305\\u5934\\u4FDD\\u62A4\\u5BC6\\u94A5: \",{\"Tag\":\"code\",\"content\":\"440b2725e91dc79b370711ef792faa3d\"}]}]},\"\\u6B64\\u65F6\\uFF0C\\u7F51\\u7EDC\\u8FDE\\u63A5\\u4ECD\\u5728\\u51C6\\u5907\\u4E2D\\uFF0C\\u6CA1\\u6709\\u4EFB\\u4F55\\u6570\\u636E\\u88AB\\u4F20\\u8F93\\u3002\"]');\n\n});\n\n\n//# sourceMappingURL=clientInitialKeysCalc.39a471c1.js.map\n","[\n  \"接下来，客户端继续为连接做准备：生成初始数据包(packet)的加密密钥。由于客户端和服务器之间还没有进行任何数据传输，因此这些密钥的安全性有限——任何观察者都可以得出密钥，并像服务器一样读取流量。加密初始数据包可以防止某些类型的攻击，如请求伪造攻击。\",\n  \"客户端生成 8bytes 的随机数据，在本文中，假设是如下内容：\",\n  {\n    \"Tag\": \"pre\",\n    \"props\": {\n      \"className\": \"ind2\"\n    },\n    \"children\": [\n      {\n        \"Tag\": \"code\",\n        \"props\": { \"className\": \"longboi\" },\n        \"content\": \"0001020304050607\"\n      }\n    ]\n  },\n  \"然后，客户端使用以下过程得出加密密钥：\",\n  {\n    \"Tag\": \"CodeSample\",\n    \"props\": {\n      \"code\": \"initial_salt = 38762cf7f55934b34d179ae6a4c80cadccbb7f0a\\ninitial_random = (random bytes from client given above)\\ninitial_secret = HKDF-Extract(salt: initial_salt, key: initial_random)\\nclient_secret = HKDF-Expand-Label(key: initial_secret, label: \\\"client in\\\", ctx: \\\"\\\", len: 32)\\nserver_secret = HKDF-Expand-Label(key: initial_secret, label: \\\"server in\\\", ctx: \\\"\\\", len: 32)\\nclient_key = HKDF-Expand-Label(key: client_secret, label: \\\"quic key\\\", ctx: \\\"\\\", len: 16)\\nserver_key = HKDF-Expand-Label(key: server_secret, label: \\\"quic key\\\", ctx: \\\"\\\", len: 16)\\nclient_iv = HKDF-Expand-Label(key: client_secret, label: \\\"quic iv\\\", ctx: \\\"\\\", len: 12)\\nserver_iv = HKDF-Expand-Label(key: server_secret, label: \\\"quic iv\\\", ctx: \\\"\\\", len: 12)\\nclient_hp_key = HKDF-Expand-Label(key: client_secret, label: \\\"quic hp\\\", ctx: \\\"\\\", len: 16)\\nserver_hp_key = HKDF-Expand-Label(key: server_secret, label: \\\"quic hp\\\", ctx: \\\"\\\", len: 16)\"\n    }\n  },\n  {\n    \"children\": [\n      \"一个有趣的点，选择常数\",\n      {\n        \"Tag\": \"code\",\n        \"content\": \"38762cf7f55934b34d179ae6a4c80cadccbb7f0a\"\n      },\n      \"作为盐，并不是它可以从数学或密码学原理推导得出，而是因为它是由谷歌研究人员发现的第一个 SHA-1 碰撞的哈希值(QUIC 本身最初是由谷歌创建、赞助和部署的)。\"\n    ]\n  },\n  \"QUIC 还从 TLS 1.3 中引入了两个新的加密概念：\",\n  {\n    \"Tag\": \"ul\",\n    \"children\": [\n      {\n        \"Tag\": \"li\",\n        \"children\": [\n          {\n            \"Tag\": \"a\",\n            \"props\": {\n              \"href\": \"https://hxndg.github.io/2020/08/27/HKDF-Extract%E4%B8%8EHKDF-Expand/\"\n            },\n            \"content\": \"HKDF-Extract\"\n          },\n          \" - 给定一个盐值和一些字节的密钥材料，派生出一个 32bytes(256bits) 固定长度的新密钥材料，输入的密钥材料的熵均匀地分布在输出中。\"\n        ]\n      },\n      {\n        \"Tag\": \"li\",\n        \"children\": [\n          {\n            \"Tag\": \"a\",\n            \"props\": {\n              \"href\": \"https://hxndg.github.io/2020/08/27/HKDF-Extract%E4%B8%8EHKDF-Expand/\"\n            },\n            \"content\": \"HKDF-Expand-Label\"\n          },\n          \" - 给出伪随机密钥、标签和上下文数据的输入，拓展为一个要求长度的密钥。\"\n        ]\n      }\n    ]\n  },\n  {\n    \"children\": [\n      \"在命令行中使用\",\n      {\n        \"Tag\": \"a\",\n        \"props\": { \"href\": \"https://quic.xargs.org/files/hkdf.sh\" },\n        \"content\": \"原作者制作的 HKDF 命令行脚本\"\n      },\n      \"，你也可以自己试试：\"\n    ]\n  },\n  {\n    \"Tag\": \"CodeSample\",\n    \"props\": {\n      \"code\": \"$ init_salt=38762cf7f55934b34d179ae6a4c80cadccbb7f0a\\n$ init_dcid=0001020304050607\\n$ init_secret=$(./hkdf extract $init_salt $init_dcid)\\n$ csecret=$(./hkdf expandlabel $init_secret \\\"client in\\\" \\\"\\\" 32)\\n$ ssecret=$(./hkdf expandlabel $init_secret \\\"server in\\\" \\\"\\\" 32)\\n$ client_init_key=$(./hkdf expandlabel $csecret \\\"quic key\\\" \\\"\\\" 16)\\n$ server_init_key=$(./hkdf expandlabel $ssecret \\\"quic key\\\" \\\"\\\" 16)\\n$ client_init_iv=$(./hkdf expandlabel $csecret \\\"quic iv\\\" \\\"\\\" 12)\\n$ server_init_iv=$(./hkdf expandlabel $ssecret \\\"quic iv\\\" \\\"\\\" 12)\\n$ client_init_hp=$(./hkdf expandlabel $csecret \\\"quic hp\\\" \\\"\\\" 16)\\n$ server_init_hp=$(./hkdf expandlabel $ssecret \\\"quic hp\\\" \\\"\\\" 16)\\n$ echo ckey: $client_init_key\\n$ echo civ: $client_init_iv\\n$ echo chp: $client_init_hp\\n$ echo skey: $server_init_key\\n$ echo siv: $server_init_iv\\n$ echo shp: $server_init_hp\\n\\nckey: b14b918124fda5c8d79847602fa3520b\\nciv: ddbc15dea80925a55686a7df\\nchp: 6df4e9d737cdf714711d7c617ee82981\\nskey: d77fc4056fcfa32bd1302469ee6ebf90\\nsiv: fcb748e37ff79860faa07477\\nshp: 440b2725e91dc79b370711ef792faa3d\"\n    }\n  },\n  \"由此我们可以得到以下密钥以及初始向量：\",\n  {\n    \"Tag\": \"ul\",\n    \"children\": [\n      {\n        \"Tag\": \"li\",\n        \"children\": [\n          \"客户端初始密钥: \",\n          {\n            \"Tag\": \"code\",\n            \"content\": \"b14b918124fda5c8d79847602fa3520b\"\n          }\n        ]\n      },\n      {\n        \"Tag\": \"li\",\n        \"children\": [\n          \"客户端初始向量: \",\n          {\n            \"Tag\": \"code\",\n            \"content\": \"ddbc15dea80925a55686a7df\"\n          }\n        ]\n      },\n      {\n        \"Tag\": \"li\",\n        \"children\": [\n          \"服务器端初始密钥: \",\n          {\n            \"Tag\": \"code\",\n            \"content\": \"d77fc4056fcfa32bd1302469ee6ebf90\"\n          }\n        ]\n      },\n      {\n        \"Tag\": \"li\",\n        \"children\": [\n          \"服务器端初始向量: \",\n          {\n            \"Tag\": \"code\",\n            \"content\": \"fcb748e37ff79860faa07477\"\n          }\n        ]\n      }\n    ]\n  },\n  \"我们还得到了以下的 \\\"数据包头保护密钥\\\"(header protection keys)，后面将解释其作用：\",\n  {\n    \"Tag\": \"ul\",\n    \"children\": [\n      {\n        \"Tag\": \"li\",\n        \"children\": [\n          \"客户端初始数据包头保护密钥: \",\n          {\n            \"Tag\": \"code\",\n            \"content\": \"6df4e9d737cdf714711d7c617ee82981\"\n          }\n        ]\n      },\n      {\n        \"Tag\": \"li\",\n        \"children\": [\n          \"服务器端初始数据包头保护密钥: \",\n          {\n            \"Tag\": \"code\",\n            \"content\": \"440b2725e91dc79b370711ef792faa3d\"\n          }\n        ]\n      }\n    ]\n  },\n  \"此时，网络连接仍在准备中，没有任何数据被传输。\"\n]\n"],"names":["parcelRequire","$parcel$global","globalThis","register","module","exports","JSON","parse"],"version":3,"file":"clientInitialKeysCalc.39a471c1.js.map"}